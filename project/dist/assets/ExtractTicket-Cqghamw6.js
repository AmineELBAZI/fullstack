import{r as t,V as a,P as u,j as e,a as p}from"./index-tLwmzl-Q.js";import{v as g}from"./venteApi-CPDvCpwX.js";import{R as h}from"./refresh-cw-CNRvxXwQ.js";const N=()=>{const[l,n]=t.useState([]),[c,r]=t.useState(!0),[o,d]=t.useState(0),i=(()=>{try{return JSON.parse(localStorage.getItem("user"))?.boutiqueId||null}catch{return null}})();t.useEffect(()=>{if(!i){a.error("Boutique ID introuvable. Veuillez vous reconnecter."),r(!1);return}r(!0),u.getPointVenteById(i).then(s=>{n(s.data.stocks||[]),r(!1)}).catch(s=>{console.error("Erreur lors du chargement des produits:",s),a.error("Erreur lors du chargement des produits."),r(!1)})},[o,i]);const x=async s=>{try{await g.printTicket(s),a.success("Ticket envoyé à l'imprimante ✅")}catch(m){console.error("Erreur impression:",m),a.error("Impossible d'envoyer le ticket à l'imprimante.")}};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-600 text-lg",children:"Chargement..."})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Exporter Tiqé"}),e.jsxs("button",{onClick:()=>d(s=>s+1),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:[e.jsx(h,{className:"w-4 h-4"}),"Actualiser"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(s=>e.jsxs("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 p-5 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg mr-4",children:e.jsx(p,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:s.produit?.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Réf: ",s.produit?.reference]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Prix Achat: ",e.jsxs("span",{className:"font-medium",children:[s.produit?.price_buy?.toFixed(2)," MAD"]})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Prix Vente: ",e.jsxs("span",{className:"font-medium",children:[s.produit?.price_sell?.toFixed(2)," MAD"]})]})]}),e.jsx("button",{onClick:()=>x(s.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded transition",children:"Exporter Tiqé"})]},s.id))})]})};export{N as default};
