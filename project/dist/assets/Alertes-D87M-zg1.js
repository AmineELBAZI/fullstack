import{r as i,j as e,L as h,a as u}from"./index-tLwmzl-Q.js";import{B as b}from"./Button-Lskl0WlK.js";import{R as j}from"./refresh-cw-CNRvxXwQ.js";import{A as l}from"./alert-triangle-DIuKnEI1.js";const v=()=>{const[a,d]=i.useState([]),[c,o]=i.useState(!0),n=()=>{const s=sessionStorage.getItem("websocketAlerts"),t=s?JSON.parse(s):[];d(t),o(!1)};i.useEffect(()=>{n()},[]);const x=s=>s===0?{level:"critical",color:"bg-red-100 border-red-300 text-red-800",icon:"text-red-500",label:"Rupture de stock"}:s<5?{level:"high",color:"bg-orange-100 border-orange-300 text-orange-800",icon:"text-orange-500",label:"Stock critique"}:{level:"medium",color:"bg-amber-100 border-amber-300 text-amber-800",icon:"text-amber-500",label:"Stock faible"};if(c)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(h,{size:"lg"})});const m=s=>{const t=a.filter(r=>!(r.produitName===s.produitName&&r.reference===s.reference&&r.boutiqueName===s.boutiqueName));d(t),sessionStorage.setItem("websocketAlerts",JSON.stringify(t))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Alertes de stock"}),e.jsx("p",{className:"text-gray-600",children:"Produits nécessitant un réapprovisionnement"})]}),e.jsxs(b,{variant:"outline",onClick:n,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Actualiser"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:e.jsx(l,{className:"h-6 w-6 text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ruptures de stock"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.filter(s=>s.quantity===0).length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-orange-50 rounded-lg",children:e.jsx(l,{className:"h-6 w-6 text-orange-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Stocks critiques"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a.filter(s=>s.quantity>0&&s.quantity<5).length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-amber-50 rounded-lg",children:e.jsx(l,{className:"h-6 w-6 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total alertes"}),e.jsx("p",{className:"text-2xl font-bold text-amber-600",children:a.length})]})]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(l,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"À propos des alertes"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Les alertes sont générées automatiquement pour les produits dont le stock est inférieur à 15 unités. Les niveaux d'alerte sont : Rupture (0), Critique (<5), et Faible (<10)."})]})]})}),e.jsx("div",{className:"space-y-4",children:a.length>0?a.sort((s,t)=>s.quantity-t.quantity).map((s,t)=>{const r=x(s.quantity);return e.jsx("div",{className:`rounded-xl border-2 p-6 ${r.color}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-2 bg-white rounded-lg ${r.icon}`,children:e.jsx(l,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.produitName}),e.jsx("span",{className:"px-2 py-1 bg-white bg-opacity-50 rounded-full text-xs font-medium",children:r.label})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Point de vente:"}),e.jsx("p",{children:s.boutiqueName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Quantité restante:"}),e.jsxs("p",{className:"font-semibold",children:[s.quantity," unités"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Référence produit:"}),e.jsx("p",{children:s.reference})]})]})]})]}),e.jsx("button",{onClick:()=>m(s),className:"ml-4 text-sm text-red-500 hover:text-red-700 font-medium",title:"Supprimer l'alerte",children:"✕"})]})},t)}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx(u,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune alerte de stock"}),e.jsx("p",{className:"text-gray-600",children:"Tous vos stocks sont à des niveaux satisfaisants"})]})})]})};export{v as default};
