import{r,V as a,j as e,a as p}from"./index-tLwmzl-Q.js";import{p as i}from"./produitApi-rf_H1KRd.js";import{R as f}from"./refresh-cw-CNRvxXwQ.js";const N=()=>{const[n,o]=r.useState([]),[d,t]=r.useState(!0),[x,m]=r.useState(0),[l,u]=r.useState("");r.useEffect(()=>{t(!0),i.getAll().then(s=>{o(s.data||[]),t(!1)}).catch(s=>{console.error("Erreur lors du chargement des produits:",s),a.error("Erreur lors du chargement des produits."),t(!1)})},[x]);const h=async s=>{try{await i.printTicketProduit(s),a.success("Ticket envoyé à l'imprimante ✅")}catch(g){console.error("Erreur impression:",g),a.error("Impossible d'envoyer le ticket à l'imprimante.")}},c=n.filter(s=>s.name.toLowerCase().includes(l.toLowerCase()));return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-600 text-lg",children:"Chargement..."})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Exporter Ticket"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"text",placeholder:"Rechercher par nom...",value:l,onChange:s=>u(s.target.value),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("button",{onClick:()=>m(s=>s+1),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:[e.jsx(f,{className:"w-4 h-4"}),"Actualiser"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:c.length>0?c.map(s=>e.jsxs("div",{className:"bg-white shadow-lg rounded-xl border border-gray-200 p-5 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg mr-4",children:e.jsx(p,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Réf: ",s.reference]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Prix Achat: ",e.jsxs("span",{className:"font-medium",children:[s.price_buy?.toFixed(2)," MAD"]})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Prix Vente: ",e.jsxs("span",{className:"font-medium",children:[s.price_sell?.toFixed(2)," MAD"]})]})]}),e.jsx("button",{onClick:()=>h(s.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded transition",children:"Exporter Ticket"})]},s.id)):e.jsx("p",{className:"text-gray-500 col-span-full text-center",children:"Aucun produit trouvé."})})]})};export{N as default};
